<div class="section" [ngStyle]="{ 'background-color': section?.color}">
  <div class="header" [ngStyle]="{'background-color': section?.color}">
    <div
    nz-typography
    [nzContent]="section?.name"
    nzEditable
    (nzContentChange)="changeSection(setSection({ name: $event }))"></div>
    <nz-space>
      <button nz-button nzShape="circle" nz-popover [nzPopoverTrigger]="'click'" [(nzPopoverVisible)]="popupVisible"
        nzPopoverTitle="Change section" [nzPopoverContent]="popupTpl" nzPopoverPlacement="bottom"
        style="margin-right: 5px">
        <i nz-icon nzType="setting" nzTheme="outline"></i>
      </button>
      <button nzShape="circle" nz-button (click)="addTask()">
        <i nz-icon nzType="plus" nzTheme="outline"></i>
      </button>
    </nz-space>
  </div>
  <div class="content">
    <div *ngFor="let task of section?.tasks" class="task">
      <app-task [task]="task"></app-task>
    </div>
    <div class="task panel panel-white" *ngIf="section?.tasks?.length === 0">
      <app-empty-data (clickButton)="addTask()" description="Add new task"></app-empty-data>
    </div>
  </div>
</div>
<ng-template #popupTpl>
  <app-color-picker [color]="section!.color" (colorChange)="changeSection(setSection({color: $event}))" ></app-color-picker>
  <div>
    <button 
    nz-popconfirm
    nz-button 
    nzPopconfirmTitle="Are you sure delete this section?"
    nzPopconfirmPlacement="bottom"
    (nzOnConfirm)="remove.emit(section.id + '')"
    nzDanger
    >Remove</button>
  </div>
</ng-template>
